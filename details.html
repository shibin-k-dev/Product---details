<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Product Details</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background-color: white;
    }

    #details {
      max-width: 600px;
      margin: 0 auto;
      background:whitesmoke;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }

    #details img {
      width: 100%;
      max-height: 300px;
      object-fit: cover;
      border-radius: 8px;
      margin-bottom: 15px;
    }

    #details h2 {
      margin: 0 0 10px;
      color: blue;
    }

    #details p {
      margin: 5px 0;
      color: gray;
      line-height: 1.5;
    }

    .thumbnail-container {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      margin: 15px 0;
      justify-content: center;
    }

    .thumbnail-container img {
      width: 80px;
      height: 80px;
      object-fit: cover;
      border-radius: 5px; 
      border: 1px solid white;
      cursor: pointer;
      transition: transform 0.2s ease;
    }

    .thumbnail-container img:hover {
      transform: scale(1.05);
      border-color: navy;
    }

    button {
      cursor: pointer;
      background-color: #ff4d4d;
      color: #fff;
      border: none;
      padding: 10px 20px;
      border-radius: 15px;
      margin-top: 15px;
      font-size: 16px;
      transition: background-color 0.3s ease;
    }

    button:hover {
      background-color: #e60000;
    }
  </style>
</head>
<body>
  <div id="details"></div>

  <script>
    const USD_TO_INR = 83.5;
    const params = new URLSearchParams(window.location.search);
    const productId = params.get('id');

    async function fetchProductDetails() {
      const container = document.getElementById('details');

      if (!productId) {
        container.innerHTML = '<p>Product not found!</p>';
        return;
      }

      try {
        // ✅ Correct API endpoint (DummyJSON)
        const response = await fetch(`https://dummyjson.com/products/${productId}`);
        const product = await response.json();
        displayProductDetails(product);
      } catch (err) {
        container.innerHTML = `<p>Error loading product: ${err.message}</p>`;
      }
    }

    function displayProductDetails(product) {
      const inrPrice = (product.price * USD_TO_INR).toFixed(2);
      const thumbnails = product.images.map(img => 
        `<img src="${img}" alt="${product.title}" onclick="changeMainImage('${img}')">`
      ).join('');

      document.getElementById('details').innerHTML = `
        <img id="mainImage" src="${product.thumbnail}" alt="${product.title}">
        <h2>${product.title}</h2>
        <p><strong>Price (Kerala):</strong> ₹${inrPrice}</p>
        <p><strong>Category:</strong> ${product.category}</p>
        <p><strong>Brand:</strong> ${product.brand}</p>
        <p><strong>Description:</strong> ${product.description}</p>
        <div class="thumbnail-container">${thumbnails}</div>
        <button onclick="goBack()">⬅️ Back to Products</button>
      `;
    }

    function changeMainImage(src) {
      document.getElementById('mainImage').src = src;
    }

    function goBack() {
      window.location.href = 'index.html';
    }

    fetchProductDetails();
  </script>

  <!-- ✅ External JS file should go OUTSIDE, not inside the script -->
  <script src="detail.js"></script>
</body>
</html>
